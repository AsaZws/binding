<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width,initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>停车缴费</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/index.css">
</head>

<body ontouchstart="" οnmοuseοver="">
  <!-- 距离顶部的距离 -->
  <div style="height: 48px;"></div>

  <!-- 顶部背景颜色 -->
  <div class="header">
    <!-- 头部固定在上方，可以填写内容 -->
  </div>

  <!-- 车牌内容 -->
  <div class="keyboard-input">
    <div class="keyboard-padding" id="plate">

      <p>请输入车牌</p>
      <div class="plate" plateNumber="粤B">
        <!-- 车牌框 -->
        <div class="plate-frame">
        </div>

        <!-- 车牌输入框 -->
        <!-- <div class="plate-input">
          <input readonly="readonly" unselectable="on" onfocus="this.blur();" type="text" name="text"
            placeholder="请输入车牌" maxlength="8" value="粤B" id="plateNumber">
        </div> -->
        <!-- 查询按钮 -->
        <div class="plate-button">
          <a href="javascript:queryDetail(searchInformation);" class="queryDetail">查询停车费</a>
        </div>
        <!-- 查询详情 -->
        <div class="detail" id="detail"></div>
        <!-- 提示说明 -->
        <div class="introduce">
          <h3>温馨提示</h3>
          <span>1>缴费说明：输入需要缴费的车牌，查询缴费金额，缴费后请在系统返回的规定时间内出场，超时后会继续计费！</span><br/>
          <span>2>其他说明：车牌识别异常，导致无法查询到结果的请到收费处人工查询缴费，高级功能请手机绑定后继续使用！</span>
        </div>
      </div>

    </div>
  </div>

  <script src="js/plate.js"></script>
  <script>
    // 加载车牌键盘
    var plate1 = new Plate("plate");
    console.log(plate1.plateNumber);

    // 查询详情对象需要的参数
    var searchInformation = {
      oParking: "鲤鱼门西街停车场",
      plateNumber: plate1.plateNumber,  // 车牌号码
      entryTime: "2019-09-10 09:24:45",
      advancedTime: "3小时6分",
      parkingFee: "14.00",
      carImg: "images/car.png"
    }

    // 查询停车详情的方法
    function queryDetail(parkingDetail) {
      var detail = document.getElementById("detail");                  // 停车详情
      if(plate1.plateNumber.length < 7) {
        alert("请输入正确车牌");
      } else {
        // 缴费明细的字符串拼接
        var detailStr = '<ul><div class="plate-number"><img src="'+ searchInformation.carImg +'" alt=""><strong>' + plate1.plateNumber + '</strong></div>';
            detailStr += "<li><span>车场名称:</span><i>" + parkingDetail.oParking + "</i></li>";
            detailStr += "<li><span>入场时间:</span><i>" + parkingDetail.entryTime + "</i></li>";
            detailStr += "<li><span>已停时长:</span><i>" + parkingDetail.advancedTime + "</i></li>";
            detailStr += "<li><span>停车费用:</span><i class='money-colors'>" + parkingDetail.parkingFee + "元</i></li></ul>";
            // detailStr += '<a href="javascript:pay();" class="pay"><p>立即支付</p></a></ul>';
            detailStr += '<a href="javascript:pay();" class="queryDetail">立即支付</a>';
        // 插入停车详情
        detail.innerHTML = detailStr;
      }
    }

    // 点击支付的方法
    function pay() {
      alert("支付中...")
    }

  </script>
</body>

</html>